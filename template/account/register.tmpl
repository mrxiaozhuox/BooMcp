{{ define "account/register.tmpl" }}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} | Sigin Up</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/mdui/1.0.2/css/mdui.min.css" rel="stylesheet" />
</head>

<body class="mdui-color-blue-grey-50">


    <div class="mdui-container"><br />
        <div class="mdui-card">

            <!-- å¡ç‰‡çš„æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->
            <div class="mdui-card-primary">
                <div class="mdui-card-primary-title">æ³¨å†Œ | <a href="/">ğŸŒ†</a></div>
            </div>

            <!-- å¡ç‰‡çš„å†…å®¹ -->
            <div class="mdui-card-content">

                <div class="mdui-textfield mdui-textfield-floating-label">
                    <label class="mdui-textfield-label">ç”¨æˆ·åç§°</label>
                    <input class="mdui-textfield-input" type="text" id="username" />
                </div>
                <div class="mdui-textfield mdui-textfield-floating-label">
                    <label class="mdui-textfield-label">ç”¨æˆ·é‚®ç®±</label>
                    <input class="mdui-textfield-input" type="email" id="email" />
                </div>
                <div class="mdui-textfield mdui-textfield-floating-label">
                    <label class="mdui-textfield-label">ç”¨æˆ·å¯†ç </label>
                    <input class="mdui-textfield-input" type="password" id="password" />
                </div>

                <div style="float: right;">
                    <a href="/login">ç«‹åˆ»ç™»å½•</a> æˆ–
                    <a href="/resetpwd">æ‰¾å›è´¦å·</a>
                </div>

                <button class="mdui-btn mdui-btn-block mdui-ripple mdui-color-indigo" id="sign-up">
                    æ³¨å†Œ
                </button>
            </div>

        </div><br />
        <div class="mdui-card">
            <!-- å¡ç‰‡çš„å†…å®¹ -->
            <div class="mdui-card-content" style="text-align:center;">
                Powered By <a href="https://mrxzx.info/">mrxzx.info</a>
            </div>

        </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/mdui/1.0.2/js/mdui.min.js"></script>

    <script>
        console.log("è¿™æ˜¯ä¸€ä¸ªå‰ç«¯UIåºŸç‰©åšçš„é¡µé¢qwq - mrxzx.info")

        $("#sign-up").click(function() {


            let email = $("#email").val()
            let username = $("#username").val()
            let password = $("#password").val()

            if (email == "" || username == "" || password == "") {
                return;
            }

            $.ajax({
                method: "POST",
                url: "/api/register",
                data: {
                    username: username,
                    email: email,
                    password: password,
                },
                dataType: "json",
                success: function(data, status) {
                    if (!data.verify) {
                        mdui.alert("è´¦å·æ³¨å†ŒæˆåŠŸï¼ã€å°†åœ¨å‡ ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‘", "æ³¨å†Œ")
                        window.location = "/login?from=register"
                    } else {
                        mdui.alert("è´¦å·æ³¨å†ŒæˆåŠŸï¼ã€æ‚¨éœ€è¦å…ˆå‰å¾€é‚®ç®±è¿›è¡ŒéªŒè¯åæ‰èƒ½ç™»å½•ã€‘", "æ³¨å†Œ")
                    }
                },
                error: function(xhr, status, error) {
                    mdui.alert("è´¦å·æ³¨å†Œå¤±è´¥ï¼š" + error)
                }
            })
        })
    </script>

</body>

</html>

{{ end }}